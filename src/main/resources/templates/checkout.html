<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizare ComandÄƒ - EasyToEat</title>
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/checkout.css}">
</head>
<body>
<!-- Include navbar-ul existent -->
<div th:insert="~{navbar :: navbar}"></div>

<div class="checkout-container">
    <div class="checkout-header">
        <h1>Finalizare ComandÄƒ</h1>
        <p>CompletaÈ›i detaliile pentru a finaliza comanda dvs.</p>
    </div>

    <div class="checkout-content">
        <div class="checkout-form-section">
            <form id="checkoutForm" class="checkout-form">
                <!-- SecÈ›iunea Detalii ComandÄƒ -->
                <div class="form-section">
                    <h2>Detalii ComandÄƒ</h2>

                    <div class="form-group">
                        <label for="noPeople">NumÄƒrul de persoane</label>
                        <input type="number" id="noPeople" name="noPeople" min="1" max="20" value="1" required>
                    </div>

                    <div class="form-group">
                        <label for="bookingDate">Data È™i ora rezervÄƒrii</label>
                        <input type="datetime-local" id="bookingDate" name="bookingDate" required>
                    </div>

                    <div class="form-group">
                        <label for="location">SelectaÈ›i locaÈ›ia</label>
                        <select id="location" name="locationId" required>
                            <option value="">AlegeÈ›i locaÈ›ia...</option>
                            <!-- OpÈ›iunile vor fi populate dinamic -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="preferences">PreferinÈ›e speciale (opÈ›ional)</label>
                        <textarea id="preferences" name="preferences" rows="3" placeholder="Ex: alergie la nuci, masa lÃ¢ngÄƒ fereastrÄƒ..."></textarea>
                    </div>
                </div>

                <!-- SecÈ›iunea Cod PromoÈ›ional -->
                <div class="form-section">
                    <h2>Cod PromoÈ›ional</h2>
                    <div class="form-group">
                        <div class="promo-input-group">
                            <input type="text" id="promoCode" name="promoCode" placeholder="IntroduceÈ›i codul promoÈ›ional">
                            <button type="button" id="applyPromoBtn" class="apply-promo-btn">AplicÄƒ</button>
                        </div>
                        <div id="promoMessage" class="promo-message"></div>
                    </div>
                </div>

                <!-- SecÈ›iunea MetodÄƒ de PlatÄƒ -->
                <div class="form-section">
                    <h2>MetodÄƒ de PlatÄƒ</h2>
                    <div class="payment-methods">
                        <div class="payment-option">
                            <input type="radio" id="cash" name="paymentType" value="cash" checked>
                            <label for="cash" class="payment-label">
                                <span class="payment-icon">ðŸ’µ</span>
                                <span>Numerar</span>
                            </label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" id="card" name="paymentType" value="card">
                            <label for="card" class="payment-label">
                                <span class="payment-icon">ðŸ’³</span>
                                <span>Card</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Butoane de acÈ›iune -->
                <div class="form-actions">
                    <button type="button" id="backToCartBtn" class="btn-secondary">ÃŽnapoi la CoÈ™</button>
                    <button type="submit" id="submitOrderBtn" class="btn-primary">
                        <span class="btn-text">FinalizeazÄƒ Comanda</span>
                        <span class="btn-loader" style="display: none;">Se proceseazÄƒ...</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- Sumar comandÄƒ -->
        <div class="order-summary">
            <h2>Sumar ComandÄƒ</h2>
            <div id="orderItems" class="order-items">
                <!-- Produsele vor fi populate dinamic -->
            </div>
            <div class="order-total">
                <div class="total-row">
                    <span>Subtotal:</span>
                    <span id="subtotal">0.00 MDL</span>
                </div>
                <div class="total-row discount-row" id="discountRow" style="display: none;">
                    <span>Reducere:</span>
                    <span id="discount">-0.00 MDL</span>
                </div>
                <div class="total-row final-total">
                    <span>Total:</span>
                    <span id="finalTotal">0.00 MDL</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal pentru detalii card -->
<div id="cardModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Detalii Card</h3>
            <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
            <form id="cardForm">
                <div class="form-group">
                    <label for="cardNumber">NumÄƒrul cardului</label>
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="expiry">Data expirÄƒrii</label>
                        <input type="text" id="expiry" placeholder="MM/YY" maxlength="5" required>
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" placeholder="123" maxlength="4" required>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancelCardBtn" class="btn-secondary">AnuleazÄƒ</button>
                    <button type="submit" id="saveCardBtn" class="btn-primary">SalveazÄƒ</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Overlay pentru loading -->
<div id="loadingOverlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner"></div>
    <p>Se proceseazÄƒ comanda...</p>
</div>

<script th:src="@{/js/checkout.js}"></script>
<script th:src="@{/js/navbar.js}"></script>
</body>
</html>